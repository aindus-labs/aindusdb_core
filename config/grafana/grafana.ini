# Configuration Grafana pour AindusDB Core monitoring
# Phase 7 - Monitoring Production : Dashboard avec datasources Prometheus et logs

[default]
# Instance name for multi-tenant setup
instance_name = aindusdb-monitoring

[server]
# Server settings
protocol = http
http_addr = 0.0.0.0
http_port = 3000
domain = localhost
enforce_domain = false
root_url = %(protocol)s://%(domain)s:%(http_port)s/
serve_from_sub_path = false
router_logging = false
static_root_path = public
enable_gzip = true
cert_file =
cert_key =
socket = /tmp/grafana.sock

[database]
# Database configuration - use SQLite for simplicity, PostgreSQL for production
type = sqlite3
host = 127.0.0.1:5432
name = grafana
user = grafana
password = grafana_password_change_me
ssl_mode = disable
ca_cert_path =
client_key_path =
client_cert_path =
server_cert_name =
path = /var/lib/grafana/grafana.db
max_idle_conn = 2
max_open_conn = 0
conn_max_lifetime = 14400
log_queries = false
cache_mode = private

[session]
# Session configuration
provider = file
provider_config = sessions
cookie_name = grafana_sess
cookie_secure = false
session_life_time = 86400
gc_interval_time = 86400
cookie_samesite = lax

[dataproxy]
# Data proxy timeout settings
timeout = 30
dialTimeout = 10
keep_alive_seconds = 30
tls_handshake_timeout = 10
expect_continue_timeout = 1
max_conns_per_host = 0
max_idle_conns = 100
max_idle_conns_per_host = 3
send_user_header = false

[analytics]
# Analytics and tracking
reporting_enabled = false
check_for_updates = false
google_analytics_ua_id =
google_tag_manager_id =
rudderstack_write_key =
rudderstack_data_plane_url =
rudderstack_sdk_url =
application_insights_connection_string =
application_insights_endpoint_url =

[security]
# Security settings for production
disable_initial_admin_creation = false
admin_user = admin
admin_password = aindusdb_admin_2026_change_me
secret_key = aindusdb_secret_key_change_me
encryption_provider = secretKey.v1
available_encryption_providers = secretKey.v1

login_remember_days = 7
login_maximum_inactive_lifetime_duration = 7d
login_maximum_lifetime_duration = 30d
token_rotation_interval_minutes = 10
disable_gravatar = true
disable_brute_force_login_protection = false
cookie_secure = false
cookie_samesite = lax
allow_embedding = false
strict_transport_security = false
strict_transport_security_max_age_seconds = 86400
strict_transport_security_preload = false
strict_transport_security_subdomains = false
x_content_type_options = true
x_xss_protection = true
content_security_policy = false
content_security_policy_template = """script-src 'self' 'unsafe-eval' 'unsafe-inline' 'strict-dynamic' $NONCE;object-src 'none';font-src 'self';style-src 'self' 'unsafe-inline' blob:;img-src * data:;base-uri 'self';connect-src 'self' grafana.com ws://$ROOT_PATH wss://$ROOT_PATH;manifest-src 'self';media-src 'none';form-action 'self';"""

[snapshots]
# Snapshot settings
external_enabled = true
external_snapshot_url = https://snapshots-origin.raintank.io
external_snapshot_name = Publish to snapshot.raintank.io
public_mode = false
remove_expired = true

[dashboards]
# Dashboard settings
versions_to_keep = 20
min_refresh_interval = 5s
default_home_dashboard_path = /var/lib/grafana/dashboards/aindusdb-overview.json

[users]
# User management
allow_sign_up = false
allow_org_create = false
auto_assign_org = true
auto_assign_org_id = 1
auto_assign_org_role = Viewer
verify_email_enabled = false
login_hint = email or username
password_hint = password
default_theme = dark
home_page = 

[auth]
# Authentication settings
login_cookie_name = grafana_session
login_maximum_inactive_lifetime_duration = 7d
login_maximum_lifetime_duration = 30d
token_rotation_interval_minutes = 10
disable_login_form = false
disable_signout_menu = false
signout_redirect_url = 
oauth_auto_login = false
oauth_state_cookie_max_age = 600
api_key_max_seconds_to_live = -1

[auth.anonymous]
# Anonymous authentication
enabled = false
org_name = Main Org.
org_role = Viewer
hide_version = false

[auth.basic]
# Basic authentication
enabled = true

[auth.proxy]
# Auth proxy
enabled = false
header_name = X-WEBAUTH-USER
header_property = username
auto_sign_up = true
sync_ttl = 60
whitelist = 
headers = 
headers_encoded = false
enable_login_token = false

[smtp]
# SMTP settings for alerts
enabled = false
host = localhost:587
user = 
password = 
cert_file =
key_file =
skip_verify = false
from_address = grafana@aindusdb.local
from_name = AindusDB Grafana
ehlo_identity = 
startTLS_policy = 

[emails]
# Email settings
welcome_email_on_sign_up = false
templates_pattern = emails/*.html, emails/*.txt
content_types = text/html

[log]
# Logging configuration
mode = console file
level = info
filters = 

[log.console]
# Console logging
level = info
format = console

[log.file]
# File logging
level = info
format = text
log_rotate = true
max_lines = 1000000
max_size_shift = 28
daily_rotate = true
max_days = 7

[log.syslog]
# Syslog
level = info
format = text
network = 
address = 
facility = 
tag = 

[metrics]
# Internal metrics
enabled = true
interval_seconds = 10
disable_total_stats = false

[metrics.prometheus]
# Prometheus metrics export
enabled = true
path = /api/prometheus

[alerting]
# Alerting engine
enabled = true
execute_alerts = true
error_or_timeout = alerting
nodata_or_nullvalues = no_data
concurrent_render_limit = 5
evaluation_timeout_seconds = 30
notification_timeout_seconds = 30
max_attempts = 3
min_interval_seconds = 1

[explore]
# Explore feature
enabled = true

[help]
# Help settings
enabled = true

[profile]
# Profiling
enabled = false

[query_history]
# Query history
enabled = true

[unified_alerting]
# Unified alerting (Grafana 8+)
enabled = true
disabled_orgs = 
admin_config_poll_interval = 60s
alertmanager_config_poll_interval = 60s
ha_peers = 
ha_listen_address = "0.0.0.0:9094"
ha_advertise_address = ""
ha_peer_timeout = 15s
ha_gossip_interval = 200ms
ha_push_pull_interval = 60s
max_attempts = 3
min_interval = 10s
execute_alerts = true

[feature_toggles]
# Feature toggles
enable = 

[date_formats]
# Date formats
full_date = MMM Do, YYYY
interval_second = HH:mm:ss
interval_minute = HH:mm
interval_hour = MM/DD HH:mm
interval_day = MM/DD
interval_month = YYYY-MM
interval_year = YYYY
use_browser_locale = false
default_timezone = browser

[panels]
# Panel settings
disable_sanitize_html = false
enable_alpha = false

[plugins]
# Plugin settings
enable_alpha = false
app_tls_skip_verify_insecure = false
allow_loading_unsigned_plugins = 
marketplace_url = https://grafana.com/grafana/plugins/

[plugin.grafana-image-renderer]
# Image renderer plugin for PDF reports
rendering_timezone = 
rendering_language = 
rendering_viewport_device_scale_factor = 
rendering_ignore_https_errors = false
rendering_verbose_logging = false
rendering_dumpio = false
rendering_args = 
rendering_chrome_bin = 
rendering_mode = default
rendering_clustering_mode = 
rendering_clustering_max_concurrency = 
rendering_clustering_timeout = 
rendering_page_zoom_factor = 
rendering_viewport_max_width = 
rendering_viewport_max_height = 
grpc_host = 
grpc_port = 

[enterprise]
# Enterprise features
license_path = 

[external_image_storage]
# External image storage for alerts
provider = 

[external_image_storage.s3]
# S3 storage
endpoint = 
path_style_access = 
bucket_url = 
bucket = 
region = 
path = 
access_key = 
secret_key = 

[rendering]
# Rendering service
server_url = 
callback_url = 
concurrent_render_request_limit = 30

[live]
# Live features
max_connections = 100
allowed_origins = 

[geomap]
# Geomap settings
default_baselayer_config = 
enable_custom_baselayers = true
